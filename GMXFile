namespace DeadCreator;

struct Vector2
{
   x : float;
   y : float;
}

struct Coord
{
   x : int;
   y : int;
}

struct Size
{
   width : int;
   height : int;
}

table ForceInfo
{
   name : string;
   is_ally : bool;
   is_vision : bool;
}

enum Approximation : int { AtLeast = 0, AtMost, Exactly }
enum TileType : int { Dirt = 0, Grass, Water, Hill }
 
table TileInfo
{
   number : string;
   indices : Coord;
}

table Location
{
   name : string;
   size : Size;
   pos : Vector2;
}

table Always{}
table Never{}
table Command{}
table Bring
{
   player : int;
   approximation : Approximation;
   number : int;
   entity_type : int;
   location_name : string;
}

table DisplayText
{
   text : string;
}
table PreserveTrigger{}
table KillEntityAtLocation
{
   numberAll : int;
   entity_type : int;
   player : int;
   location_name : string;
}

union ConditionBase 
{
   Always,
   Never,
   Command,
   Bring
}

union ActionBase 
{ 
   DisplayText,
   PreserveTrigger,
   KillEntityAtLocation
}

table Condition 
{
   condition : ConditionBase;
}

table Action
{
  action : ActionBase;
}

table Trigger
{
   players : [int];
   conditions : [Condition];
   actions: [Action];
}

table Entity
{
   id : int;
   player_type : int;
   entity_type : int;
   pos : Vector2;
}

table Polygon
{
   vertices : [Vector2];
}

table PlayerInfo
{
   player : int;
   force : int;
   owner : int;
}

table GMXFile
{
   default_type : TileType;
   tiles : [TileInfo];
   number_of_tiles : Coord;
   tile_size : Size;
   collision_regions : [Polygon];
   entities : [Entity];
   cell_space_size : Size;
   locations : [Location];
   triggers : [Trigger];
   playerInfos : [PlayerInfo];
   force1_info : ForceInfo;
   force2_info : ForceInfo;
}

root_type GMXFile;




